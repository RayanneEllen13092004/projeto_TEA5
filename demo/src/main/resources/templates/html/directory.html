<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diret√≥rio TEA - Profissionais e Atividades</title>
    <link rel="icon" href="/static/imgs/logo.svg" type="image/svg+xml">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Crimson+Pro:wght@400;600;700&display=swap" rel="stylesheet">   
    <link rel="stylesheet" href="/static/css/directory.css">
    
</head>
<body>
    <div class="container">
        <header>
            <h1>Diret√≥rio TEA</h1>
            <p class="subtitle">Encontre profissionais, cl√≠nicas e atividades especializadas pr√≥ximas a voc√™</p>
    
            <div class="category-pills">
                <button class="pill active" data-specialty="todos">Todos</button>
                <button class="pill" data-specialty="fonoaudiologia">Fonoaudiologia</button>
                <button class="pill" data-specialty="terapia-ocupacional">Terapia Ocupacional</button>
                <button class="pill" data-specialty="aba">Terapia ABA</button>
                <button class="pill" data-specialty="musicoterapia">Musicoterapia</button>
                <button class="pill" data-specialty="natacao">Nata√ß√£o Adaptada</button>
                <button class="pill" data-specialty="equoterapia">Equoterapia</button>
            </div>
        </header>    

        <div class="search-section">
            <div class="search-header">
                <h2>Buscar por localiza√ß√£o</h2>
                <span class="location-badge" id="userLocation">
                    üìç Detectando localiza√ß√£o...
                </span>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label for="searchInput">Buscar por nome ou especialidade</label>
                    <input type="text" id="searchInput" placeholder="Ex: Psic√≥logo, Fonoaudi√≥logo, Terapia ABA...">
                </div>

                <div class="filter-group">
                    <label for="categoryFilter">Categoria</label>
                    <select id="categoryFilter">
                        <option value="">Todas as categorias</option>
                        <option value="profissional">Profissionais</option>
                        <option value="clinica">Cl√≠nicas</option>
                        <option value="atividade">Atividades</option>
                        <option value="escola">Escolas</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="distanceFilter">Dist√¢ncia m√°xima</label>
                    <select id="distanceFilter">
                        <option value="5">At√© 5 km</option>
                        <option value="10" selected>At√© 10 km</option>
                        <option value="20">At√© 20 km</option>
                        <option value="50">At√© 50 km</option>
                        <option value="100">At√© 100 km</option>
                    </select>
                </div>
            </div>

            
        </div>

        <div class="map-container" id="mapContainer">
            <div class="map-placeholder">
                <p>üó∫Ô∏è Mapa interativo com os resultados</p>
                <small>Os locais aparecer√£o aqui conforme sua busca</small>
            </div>
        </div>

        <div class="loading" id="loading">
            Carregando resultados pr√≥ximos a voc√™...
        </div>

        <div class="results-section" id="resultsSection">
            <div class="results-header">
                <div>
                    <h2 style="color: #8b7355; margin-bottom: 5px;">Resultados pr√≥ximos</h2>
                    <p class="results-count" id="resultsCount">12 profissionais e servi√ßos encontrados</p>
                </div>
                <div class="view-toggle">
                    <button class="view-btn active">Grade</button>
                    <button class="view-btn">Lista</button>
                </div>
            </div>

            <div class="results-grid" id="resultsGrid">
                <!-- Results will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // Simulated data
        const sampleResults = [
            {
                id: 1,
                name: "Dra. Ana Paula Silva",
                type: "Profissional",
                specialty: "Psic√≥loga - Especialista em TEA",
                distance: 2.3,
                address: "Rua das Flores, 123 - Centro",
                phone: "(82) 3333-4444",
                tags: ["ABA", "Cognitivo-Comportamental", "Atende crian√ßas"],
                rating: 4.9,
                reviews: 47
            },
            {
                id: 2,
                name: "Cl√≠nica NeuroDesenvolver",
                type: "Cl√≠nica",
                specialty: "Centro Multidisciplinar TEA",
                distance: 3.8,
                address: "Av. Principal, 456 - Jaragu√°",
                phone: "(82) 3555-6666",
                tags: ["Equipe multidisciplinar", "Terapia ABA", "Fonoaudiologia"],
                rating: 4.8,
                reviews: 89
            },
            {
                id: 3,
                name: "Fono Mariana Costa",
                type: "Profissional",
                specialty: "Fonoaudi√≥loga",
                distance: 1.5,
                address: "Rua do Com√©rcio, 789",
                phone: "(82) 3777-8888",
                tags: ["Linguagem", "Comunica√ß√£o alternativa", "Atendimento domiciliar"],
                rating: 5.0,
                reviews: 32
            },
            {
                id: 4,
                name: "Centro de Equoterapia Vida Nova",
                type: "Atividade",
                specialty: "Equoterapia para crian√ßas TEA",
                distance: 8.2,
                address: "S√≠tio Recanto Verde - Zona Rural",
                phone: "(82) 3999-0000",
                tags: ["Equoterapia", "Fins de semana", "A partir de 3 anos"],
                rating: 4.7,
                reviews: 28
            },
            {
                id: 5,
                name: "Dr. Roberto Mendes",
                type: "Profissional",
                specialty: "Terapeuta Ocupacional",
                distance: 4.1,
                address: "Pra√ßa da Matriz, 321",
                phone: "(82) 3444-5555",
                tags: ["Integra√ß√£o sensorial", "AVDs", "Brincar terap√™utico"],
                rating: 4.9,
                reviews: 56
            },
            {
                id: 6,
                name: "Espa√ßo Musicar",
                type: "Atividade",
                specialty: "Musicoterapia",
                distance: 5.7,
                address: "Rua das Artes, 654",
                phone: "(82) 3666-7777",
                tags: ["Musicoterapia", "Aulas em grupo", "Atende todas as idades"],
                rating: 4.6,
                reviews: 41
            },
            {
                id: 7,
                name: "Instituto Avan√ßar",
                type: "Cl√≠nica",
                specialty: "Centro ABA Especializado",
                distance: 6.3,
                address: "Av. dos Estados, 1020",
                phone: "(82) 3888-9999",
                tags: ["ABA intensivo", "Supervis√£o BCBA", "Atendimento escolar"],
                rating: 4.9,
                reviews: 73
            },
            {
                id: 8,
                name: "Nata√ß√£o Adaptada √Ågua Viva",
                type: "Atividade",
                specialty: "Nata√ß√£o para crian√ßas especiais",
                distance: 3.2,
                address: "Clube Recreativo, 888",
                phone: "(82) 3111-2222",
                tags: ["Nata√ß√£o adaptada", "Professores especializados", "Grupos pequenos"],
                rating: 4.8,
                reviews: 35
            },
            {
                id: 9,
                name: "Psicopedagoga Juliana Ramos",
                type: "Profissional",
                specialty: "Psicopedagoga Cl√≠nica",
                distance: 2.8,
                address: "Rua Sete de Setembro, 432",
                phone: "(82) 3222-3333",
                tags: ["Alfabetiza√ß√£o", "Dificuldades de aprendizagem", "Consultoria escolar"],
                rating: 4.7,
                reviews: 29
            },
            {
                id: 10,
                name: "Escola Inclusiva Pequenos Passos",
                type: "Escola",
                specialty: "Educa√ß√£o Infantil Inclusiva",
                distance: 4.5,
                address: "Rua da Educa√ß√£o, 567",
                phone: "(82) 3444-5556",
                tags: ["Educa√ß√£o inclusiva", "Mediadores", "Ber√ß√°rio ao Infantil V"],
                rating: 4.9,
                reviews: 94
            },
            {
                id: 11,
                name: "Nutricionista Carla Ferreira",
                type: "Profissional",
                specialty: "Nutri√ß√£o Comportamental TEA",
                distance: 3.9,
                address: "Consult√≥rio Sa√∫de Integrada",
                phone: "(82) 3555-6667",
                tags: ["Seletividade alimentar", "Nutri√ß√£o infantil", "Atendimento familiar"],
                rating: 4.8,
                reviews: 38
            },
            {
                id: 12,
                name: "Centro de Desenvolvimento Infantil",
                type: "Cl√≠nica",
                specialty: "Avalia√ß√£o e Interven√ß√£o TEA",
                distance: 7.1,
                address: "Av. Sa√∫de, 2000",
                phone: "(82) 3777-8889",
                tags: ["Avalia√ß√£o diagn√≥stica", "Interven√ß√£o precoce", "Orienta√ß√£o parental"],
                rating: 4.9,
                reviews: 67
            }
        ];

        let currentResults = [...sampleResults];
        let userCoords = null;

        // Get user location
        function getUserLocation() {
            const locationBadge = document.getElementById('userLocation');
            
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        userCoords = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        locationBadge.innerHTML = 'üìç Macei√≥, AL';
                        renderResults(currentResults);
                    },
                    (error) => {
                        locationBadge.innerHTML = 'üìç Macei√≥, AL';
                        renderResults(currentResults);
                    }
                );
            } else {
                locationBadge.innerHTML = 'üìç Macei√≥, AL';
                renderResults(currentResults);
            }
        }

        // Render results
        function renderResults(results) {
            const grid = document.getElementById('resultsGrid');
            const count = document.getElementById('resultsCount');
            
            if (results.length === 0) {
                grid.innerHTML = `
                    <div class="no-results" style="grid-column: 1/-1;">
                        <h3>Nenhum resultado encontrado</h3>
                        <p>Tente ajustar os filtros ou ampliar a √°rea de busca</p>
                    </div>
                `;
                count.textContent = 'Nenhum resultado encontrado';
                return;
            }

            count.textContent = `${results.length} profissionais e servi√ßos encontrados`;
            
            grid.innerHTML = results.map(result => `
                <div class="result-card" onclick="showDetails(${result.id})">
                    <div class="card-header">
                        <div>
                            <h3 class="card-title">${result.name}</h3>
                            <p class="card-specialty">${result.specialty}</p>
                        </div>
                        <span class="card-type">${result.type}</span>
                    </div>
                    
                    <div class="card-info">
                        <div class="info-item">
                            <span>
                                <svg class="icon" viewBox="0 0 24 24" width="22" height="22" fill="#78a896">
                                    <path
                                    d="M12 2C8.1 2 5 5.1 5 9c0 5.2 7 13 7 13s7-7.8 7-13c0-3.9-3.1-7-7-7zm0 9.5c-1.4 0-2.5-1.1-2.5-2.5S10.6 6.5 12 6.5s2.5 1.1 2.5 2.5S13.4 11.5 12 11.5z"
                                    />
                                </svg>
                            </span>
                            <span>${result.distance} km - ${result.address}</span>
                        </div>

                        <div class="info-item">
                            <span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="#F8BBD0" aria-labelledby="title desc" role="img">
                                <title id="title">√çcone de telefone</title>
                                <desc id="desc">Um telefone representado em rosa claro, simbolizando comunica√ß√£o.</desc>
                                <path d="M6.62 10.79a15.05 15.05 0 0 0 6.59 6.59l2.2-2.2a1 1 0 0 1 1.01-.24c1.12.37 2.33.57 3.58.57a1 1 0 0 1 1 1v3.49a1 1 0 0 1-1 1A17.93 17.93 0 0 1 2 5a1 1 0 0 1 1-1h3.5a1 1 0 0 1 1 1c0 1.25.2 2.46.57 3.58a1 1 0 0 1-.25 1.01l-2.2 2.2z"/>
                                </svg></span>
                            <span>${result.phone}</span>

                        </div>
                        <div class="info-item">
                            <span><svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" role="img" aria-labelledby="title desc">
                                <polygon
                                    points="12 2.4 14.9 8.7 21.8 9.6 16.6 14.1 17.9 21 12 17.7 6.1 21 7.4 14.1 2.2 9.6 9.1 8.7"
                                    fill="#FFD54A"
                                    stroke="#FFD54A"
                                    stroke-width="1.6"
                                    stroke-linejoin="round"
                                    stroke-linecap="round"/>
                                </svg>
                            </span>
                            <span>${result.rating} (${result.reviews} avalia√ß√µes)</span>
                        </div>
                    </div>
                    
                    <div class="card-tags">
                        ${result.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                    
                    <div class="card-actions">
                        <button class="action-btn btn-primary" onclick="event.stopPropagation(); contactProvider(${result.id})">
                            Entrar em contato
                        </button>
                        <button class="action-btn btn-secondary" onclick="event.stopPropagation(); showRoute(${result.id})">
                            Ver rota
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Filter functions
        function filterResults() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            const distance = parseFloat(document.getElementById('distanceFilter').value);
            const activeSpecialty = document.querySelector('.pill.active').dataset.specialty;

            let filtered = sampleResults.filter(result => {
                const matchesSearch = result.name.toLowerCase().includes(searchTerm) ||
                                    result.specialty.toLowerCase().includes(searchTerm) ||
                                    result.tags.some(tag => tag.toLowerCase().includes(searchTerm));
                
                const matchesCategory = !category || result.type.toLowerCase() === category;
                const matchesDistance = result.distance <= distance;
                
                const matchesSpecialty = activeSpecialty === 'todos' || 
                                       result.tags.some(tag => 
                                           tag.toLowerCase().includes(activeSpecialty.replace('-', ' '))
                                       );

                return matchesSearch && matchesCategory && matchesDistance && matchesSpecialty;
            });

            currentResults = filtered;
            renderResults(filtered);
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', filterResults);
        document.getElementById('categoryFilter').addEventListener('change', filterResults);
        document.getElementById('distanceFilter').addEventListener('change', filterResults);

        document.querySelectorAll('.pill').forEach(pill => {
            pill.addEventListener('click', function() {
                document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
                this.classList.add('active');
                filterResults();
            });
        });

        // Action functions
        function showDetails(id) {
            const result = sampleResults.find(r => r.id === id);
            alert(`Detalhes de ${result.name}\n\nEm uma vers√£o completa, aqui seria aberto um modal com informa√ß√µes detalhadas, fotos, hor√°rios de atendimento, depoimentos e op√ß√µes de agendamento.`);
        }

        function contactProvider(id) {
            const result = sampleResults.find(r => r.id === id);
            alert(`Entrando em contato com ${result.name}\n\nTelefone: ${result.phone}\n\nEm uma vers√£o completa, voc√™ poderia ligar diretamente, enviar WhatsApp ou agendar uma consulta.`);
        }

        function showRoute(id) {
            const result = sampleResults.find(r => r.id === id);
            alert(`Abrindo rota para ${result.name}\n\nEm uma vers√£o completa, isso abriria o Google Maps ou Waze com a rota at√© o local.`);
        }

        // Initialize
        getUserLocation();
    </script>
</body>
</html>